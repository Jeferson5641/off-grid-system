(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{2699:(e,a,t)=>{"use strict";t.d(a,{default:()=>i});var s=t(5155),l=t(2115);let d={lifepo4:{dod:.8,eff:.95,label:"LiFePO4"},lead_acid_stationary:{dod:.6,eff:.85,label:"Chumbo-\xe1cido (Estacion\xe1ria)"},lead_acid_automotive:{dod:.3,eff:.8,label:"Chumbo-\xe1cido (Automotiva)"}};async function o(e,a){let t=`https://power.larc.nasa.gov/api/temporal/climatology/point?parameters=ALLSKY_SFC_SW_DWN&community=RE&latitude=${encodeURIComponent(e)}&longitude=${encodeURIComponent(a)}&format=JSON`,s=await fetch(t);if(!s.ok)throw Error("Falha ao obter dados de radia\xe7\xe3o (NASA POWER)");let l=await s.json(),d=l.properties?.parameter?.ALLSKY_SFC_SW_DWN;if(!d)throw Error("Resposta inesperada da API");return["JAN","FEB","MAR","APR","MAY","JUN","JUL","AUG","SEP","OCT","NOV","DEC"].map(e=>{let a=Number(d[e]);return Number.isFinite(a)?a:0})}let r={monthlyKwh:300,panelWatt:550,performanceRatio:.75,autonomyDays:3,batteryType:"lifepo4",bankVoltage:48,batteryUnitAh:100};function i(){let[e,a]=(0,l.useState)(r),[t,i]=(0,l.useState)(-15.7797),[n,c]=(0,l.useState)(-47.9297),[m,u]=(0,l.useState)(null),[b,x]=(0,l.useState)(!1),[h,g]=(0,l.useState)(null),[p,f]=(0,l.useState)(null),N=e=>{let{name:t,value:s,type:l}=e.target;a(e=>({...e,[t]:"number"===l?Number(s):s}))},j=async()=>{x(!0),g(null),u(null);try{let e=await o(t,n);u(e)}catch(e){g(e.message||"Erro ao buscar dados de radia\xe7\xe3o.")}finally{x(!1)}},v=d[e.batteryType];return(0,s.jsxs)("div",{className:"max-w-4xl mx-auto p-6 bg-white shadow-lg rounded-lg",children:[(0,s.jsx)("h1",{className:"text-3xl font-bold mb-6 text-indigo-700",children:"☀️ Calculadora Off-Grid Solar"}),(0,s.jsxs)("form",{onSubmit:a=>{if(a.preventDefault(),g(null),f(null),!m||0===m.length)return void g("Por favor, **busque a radia\xe7\xe3o solar** primeiro.");try{let a=function(e,a){let{monthlyKwh:t,panelWatt:s,performanceRatio:l,autonomyDays:o,batteryType:r,bankVoltage:i,batteryUnitAh:n}=e;if(0===a.length)throw Error("Dados de irradia\xe7\xe3o solar ausentes.");let c=a.reduce((e,a)=>e+a,0)/a.length,m=t/30,u=1.2*m,b=s/1e3*c*l,x=b>0?Math.ceil(u/b):0,h=d[r]||d.lifepo4,g=u*o/(h.dod*h.eff),p=1e3*g/i,f=Math.ceil(p/n);return{avgPeakSunHours:c,dailyConsumptionKwh:m,dailyWithLosses:u,panelDailyProductionKwh:b,panelsNeeded:x,batteryCapacityKwh:g,batteryCapacityAh:p,unitsNeeded:f,chosenSpecs:h,avgRaw:c}}(e,m);f(a)}catch(e){g(e.message||"Erro durante o c\xe1lculo do dimensionamento.")}},className:"grid grid-cols-1 gap-6",children:[(0,s.jsx)("h2",{className:"text-xl font-semibold border-b pb-2 text-indigo-600",children:"1. Localiza\xe7\xe3o e Consumo"}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,s.jsxs)("label",{className:"block",children:[(0,s.jsx)("div",{className:"text-sm font-medium text-black",children:"Latitude"}),(0,s.jsx)("input",{type:"number",step:"0.0001",value:t,onChange:e=>i(Number(e.target.value)),className:"mt-1 block w-full rounded-md border p-2 focus:ring-indigo-500 focus:border-indigo-500 text-black"})]}),(0,s.jsxs)("label",{className:"block",children:[(0,s.jsx)("div",{className:"text-sm font-medium text-black",children:"Longitude"}),(0,s.jsx)("input",{type:"number",step:"0.0001",value:n,onChange:e=>c(Number(e.target.value)),className:"mt-1 block w-full rounded-md border p-2 focus:ring-indigo-500 focus:border-indigo-500 text-black"})]}),(0,s.jsxs)("label",{className:"block",children:[(0,s.jsx)("div",{className:"text-sm font-medium text-black",children:"Consumo m\xe9dio/m\xeas (kWh)"}),(0,s.jsx)("input",{type:"number",min:0,name:"monthlyKwh",value:e.monthlyKwh,onChange:N,className:"mt-1 block w-full rounded-md border p-2 focus:ring-indigo-500 focus:border-indigo-500 text-black"}),(0,s.jsxs)("div",{className:"text-xs text-gray-500 mt-1",children:["Consumo di\xe1rio: ",(e.monthlyKwh/30).toFixed(2)," kWh"]})]})]}),(0,s.jsx)("h2",{className:"text-xl font-semibold border-b pb-2 mt-4 text-indigo-600",children:"2. Componentes e Configura\xe7\xf5es"}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,s.jsxs)("label",{className:"block",children:[(0,s.jsx)("div",{className:"text-sm font-medium text-black",children:"Pot\xeancia do Painel (Wp)"}),(0,s.jsx)("input",{type:"number",min:50,name:"panelWatt",value:e.panelWatt,onChange:N,className:"mt-1 block w-full rounded-md border p-2 focus:ring-indigo-500 focus:border-indigo-500 text-black"})]}),(0,s.jsxs)("label",{className:"block",children:[(0,s.jsx)("div",{className:"text-sm font-medium text-black",children:"Performance Ratio (0-1)"}),(0,s.jsx)("input",{type:"number",step:"0.01",min:.5,max:.95,name:"performanceRatio",value:e.performanceRatio,onChange:N,className:"mt-1 block w-full rounded-md border p-2 focus:ring-indigo-500 focus:border-indigo-500 text-black"}),(0,s.jsx)("div",{className:"text-xs text-gray-500 mt-1",children:"Fator de perdas (~0.75)"})]}),(0,s.jsxs)("label",{className:"block",children:[(0,s.jsx)("div",{className:"text-sm font-medium text-black",children:"Dias de Autonomia"}),(0,s.jsx)("input",{type:"number",min:1,name:"autonomyDays",value:e.autonomyDays,onChange:N,className:"mt-1 block w-full rounded-md border p-2 focus:ring-indigo-500 focus:border-indigo-500 text-black"})]}),(0,s.jsxs)("label",{className:"block",children:[(0,s.jsx)("div",{className:"text-sm font-medium text-black",children:"Tens\xe3o do Banco (V)"}),(0,s.jsxs)("select",{name:"bankVoltage",value:e.bankVoltage,onChange:N,className:"mt-1 block w-full rounded-md border p-2 focus:ring-indigo-500 focus:border-indigo-500 text-black",children:[(0,s.jsx)("option",{value:12,children:"12 V"}),(0,s.jsx)("option",{value:24,children:"24 V"}),(0,s.jsx)("option",{value:48,children:"48 V"})]})]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,s.jsxs)("label",{className:"block",children:[(0,s.jsx)("div",{className:"text-sm font-medium text-black",children:"Tipo de Bateria"}),(0,s.jsx)("select",{name:"batteryType",value:e.batteryType,onChange:N,className:"mt-1 block w-full rounded-md border p-2 focus:ring-indigo-500 focus:border-indigo-500 text-black",children:Object.entries(d).map(([e,a])=>(0,s.jsx)("option",{value:e,children:a.label},e))}),(0,s.jsxs)("div",{className:"text-xs text-gray-500 mt-1",children:["DoD: ",100*v.dod,"% | Eff:"," ",Math.round(100*v.eff),"%"]})]}),(0,s.jsxs)("label",{className:"block md:col-span-2",children:[(0,s.jsx)("div",{className:"text-sm font-medium text-black",children:"Capacidade da Unidade de Bateria (Ah)"}),(0,s.jsx)("input",{type:"number",min:1,name:"batteryUnitAh",value:e.batteryUnitAh,onChange:N,className:"mt-1 block w-full rounded-md border p-2 focus:ring-indigo-500 focus:border-indigo-500 text-black"})]})]}),(0,s.jsxs)("div",{className:"flex flex-wrap gap-3 mt-4",children:[(0,s.jsx)("button",{type:"button",onClick:j,className:"px-6 py-2 bg-blue-600 text-white font-semibold rounded-md hover:bg-blue-700 transition",disabled:b,children:b?"Consultando...":"Buscar Radia\xe7\xe3o (NASA POWER)"}),(0,s.jsx)("button",{type:"submit",className:"px-6 py-2 bg-green-600 text-white font-semibold rounded-md hover:bg-green-700 transition ml-auto",disabled:b||!m,children:"Calcular Sistema"})]})]}),h&&(0,s.jsxs)("div",{className:"mt-6 p-3 bg-red-100 border border-red-400 text-red-700 rounded-md",children:["Erro: ",h]}),m&&(0,s.jsxs)("div",{className:"bg-blue-50 p-4 rounded-md border border-blue-200 mt-4",children:[(0,s.jsx)("h2",{className:"font-semibold text-blue-800",children:"Dados de Radia\xe7\xe3o Solar (HSP m\xe9dia)"}),(0,s.jsxs)("div",{className:"mt-3 text-xs text-gray-600",children:["**HSP M\xe9dia (Total):**"," ",m.reduce((e,a)=>e+a,0)/m.length," ","kWh/m\xb2/dia."]})]}),p&&(0,s.jsxs)("div",{className:"mt-6 bg-green-50 p-6 rounded-lg border-2 border-green-300",children:[(0,s.jsx)("h2",{className:"text-xl font-bold mb-4 text-green-800",children:"✅ Resultados do Dimensionamento"}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,s.jsxs)("div",{className:"p-4 rounded-md bg-white shadow-md border-l-4 border-yellow-600",children:[(0,s.jsxs)("div",{className:"text-sm text-gray-600",children:["Pain\xe9is Necess\xe1rios (",e.panelWatt," Wp)"]}),(0,s.jsx)("div",{className:"text-3xl font-extrabold text-yellow-700",children:p.panelsNeeded}),(0,s.jsxs)("div",{className:"text-sm text-gray-600 mt-2",children:["Pot\xeancia Total Instalada: **",Math.ceil(p.panelsNeeded*e.panelWatt/1e3)," ","kWp**"]})]}),(0,s.jsxs)("div",{className:"p-4 rounded-md bg-white shadow-md border-l-4 border-blue-600",children:[(0,s.jsx)("div",{className:"text-sm text-gray-600",children:"Capacidade Total Necess\xe1ria"}),(0,s.jsxs)("div",{className:"text-3xl font-extrabold text-blue-700",children:[p.batteryCapacityAh.toFixed(0)," Ah"]}),(0,s.jsxs)("div",{className:"text-sm text-gray-600 mt-2",children:["Voltagem: **",e.bankVoltage," V**",(0,s.jsx)("br",{}),"Capacidade Total: **",p.batteryCapacityKwh.toFixed(2)," ","kWh**"]})]}),(0,s.jsxs)("div",{className:"p-4 rounded-md bg-white shadow-md border-l-4 border-purple-600",children:[(0,s.jsxs)("div",{className:"text-sm text-gray-600",children:["Unidades de Bateria (",e.batteryUnitAh," Ah)"]}),(0,s.jsx)("div",{className:"text-3xl font-extrabold text-purple-700",children:p.unitsNeeded}),(0,s.jsxs)("div",{className:"text-sm text-gray-600 mt-2",children:["Autonomia: **",e.autonomyDays," dias**",(0,s.jsx)("br",{}),"Tipo: **",p.chosenSpecs.label,"** (DoD"," ",100*p.chosenSpecs.dod,"%)"]})]})]})]})]})}},8413:(e,a,t)=>{Promise.resolve().then(t.bind(t,2699))}},e=>{e.O(0,[441,826,358],()=>e(e.s=8413)),_N_E=e.O()}]);